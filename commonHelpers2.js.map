{"version":3,"file":"commonHelpers2.js","sources":["../src/img/icons.svg","../src/js/task-11-1/search-form-handles.js"],"sourcesContent":["export default \"__VITE_ASSET__0c78aa03__\"","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport insertCardsToGallery from '../common/insert-cards-to-gallery.js';\nimport '../../css/layout/simple-lightbox-window.css';\nimport iconsUrl from '../../img/icons.svg';\n\nimport createCardsGallery from '../common/create-cards-gallery.js'; //For callbacks\nimport getImages from '../common/get-images.js'; //For promises\nimport { createErrMsg } from '../common/create-msg.js';\n\nimport { BGR_GALLERY, BGR_BODY } from '../common/constants.js';\n\nconst galleryRef = document.querySelector('.gallery');\nconst loaderRef = document.querySelector('.loader');\nconst searchForm = document.querySelector('.search-form');\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\nlet slBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  nav: true,\n  navText: [\n    `<svg class=\"lightbox-button-icon-prev\" width=\"24\" height=\"24\" aria-label=\"icon arrow left\">\n          <use href=\"${iconsUrl}#icon-chevron-left\"></use>\n        </svg>`,\n    `<svg class=\"lightbox-button-icon-next\" width=\"24\" height=\"24\" aria-label=\"icon arrow right\">\n          <use href=\"${iconsUrl}#icon-chevron-right\"></use>\n        </svg>`,\n  ],\n  close: true,\n  closeText: `\n        <svg class=\"lightbox-close-icon\" width=\"16\" height=\"16\">\n          <use href=\"${iconsUrl}#close-form\"></use>\n        </svg>`,\n  enableKeyboard: true,\n  showCounter: true,\n  animationSlide: true,\n  loop: true,\n});\n\n// 1) With callbacks (Create gallery from server data)================================\n// function onSearchFormSubmit(event) {\n//   event.preventDefault();\n//   try {\n//     loaderRef.style.display = 'block';\n//     const searchStr = event.currentTarget.search.value.trim();\n//     insertCardsToGallery(searchStr, refreshOnSuccess, refreshOnError);\n//   } catch (error) {\n//     console.error('Error:', error);\n//     loaderRef.style.display = 'none';\n//   }\n// }\n\n// 2) With promises (Get data from server) ============================================\nfunction onSearchFormSubmit(event) {\n  event.preventDefault();\n\n  try {\n    loaderRef.style.display = 'block';\n    const searchStr = event.currentTarget.search.value.trim();\n    getImages(searchStr)\n      .then(data => refreshOnSuccess(data))\n      .catch(msg => refreshOnError(msg));\n  } catch (error) {\n    console.error('Unknown Error:', error);\n    loaderRef.style.display = 'none';\n  }\n}\n\nfunction refreshOnError(msg) {\n  searchForm.search.value = '';\n  loaderRef.style.display = 'none';\n  createErrMsg(msg);\n  galleryRef.style.backgroundColor = BGR_BODY;\n  galleryRef.innerHTML = '';\n  slBox.refresh();\n}\n\nfunction refreshOnSuccess(data) {\n  searchForm.search.value = '';\n  loaderRef.style.display = 'none';\n  galleryRef.style.backgroundColor = BGR_GALLERY;\n  createCardsGallery(data, galleryRef);\n  slBox.refresh();\n}\n"],"names":["iconsUrl","galleryRef","loaderRef","searchForm","onSearchFormSubmit","slBox","SimpleLightbox","event","searchStr","getImages","data","refreshOnSuccess","msg","refreshOnError","error","createErrMsg","BGR_BODY","BGR_GALLERY","createCardsGallery"],"mappings":"oKAAA,MAAeA,EAAA,iDCaTC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAY,SAAS,cAAc,SAAS,EAC5CC,EAAa,SAAS,cAAc,cAAc,EAExDA,EAAW,iBAAiB,SAAUC,CAAkB,EAExD,IAAIC,EAAQ,IAAIC,EAAe,aAAc,CAC3C,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,IAAK,GACL,QAAS,CACP;AAAA,uBACmBN;AAAA,gBAEnB;AAAA,uBACmBA;AAAA,eAEpB,EACD,MAAO,GACP,UAAW;AAAA;AAAA,uBAEUA;AAAA,gBAErB,eAAgB,GAChB,YAAa,GACb,eAAgB,GAChB,KAAM,EACR,CAAC,EAgBD,SAASI,EAAmBG,EAAO,CACjCA,EAAM,eAAc,EAEpB,GAAI,CACFL,EAAU,MAAM,QAAU,QAC1B,MAAMM,EAAYD,EAAM,cAAc,OAAO,MAAM,OACnDE,EAAUD,CAAS,EAChB,KAAKE,GAAQC,EAAiBD,CAAI,CAAC,EACnC,MAAME,GAAOC,EAAeD,CAAG,CAAC,CACpC,OAAQE,EAAP,CACA,QAAQ,MAAM,iBAAkBA,CAAK,EACrCZ,EAAU,MAAM,QAAU,MAC3B,CACH,CAEA,SAASW,EAAeD,EAAK,CAC3BT,EAAW,OAAO,MAAQ,GAC1BD,EAAU,MAAM,QAAU,OAC1Ba,EAAaH,CAAG,EAChBX,EAAW,MAAM,gBAAkBe,EACnCf,EAAW,UAAY,GACvBI,EAAM,QAAO,CACf,CAEA,SAASM,EAAiBD,EAAM,CAC9BP,EAAW,OAAO,MAAQ,GAC1BD,EAAU,MAAM,QAAU,OAC1BD,EAAW,MAAM,gBAAkBgB,EACnCC,EAAmBR,EAAMT,CAAU,EACnCI,EAAM,QAAO,CACf"}