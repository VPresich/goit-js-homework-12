{"version":3,"file":"commonHelpers2.js","sources":["../src/img/icons.svg","../src/js/task-11-1/search-form-handles.js"],"sourcesContent":["export default \"__VITE_ASSET__f7a4ec9e__\"","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport '../../css/layout/simple-lightbox-window.css';\nimport iconsUrl from '../../img/icons.svg';\n\nimport createCardsGallery from '../common/create-cards-gallery.js';\nimport getImages from '../common/get-images.js';\nimport { createErrMsg } from '../common/create-msg.js';\n\nimport {\n  BGR_GALLERY,\n  BGR_BODY,\n  DEF_ELEMENT_PERPAGE,\n} from '../common/constants.js';\n\nimport GalleryPagination from '../common/gallery-pagination.js';\n\nconst galleryRef = document.querySelector('.gallery');\nconst loaderRef = document.querySelector('.border-loader');\nconst searchForm = document.querySelector('.search-form');\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\nlet searchString = '';\n\nlet slBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  nav: true,\n  navText: [\n    `<svg class=\"lightbox-button-icon-prev\" width=\"24\" height=\"24\" aria-label=\"icon arrow left\">\n          <use href=\"${iconsUrl}#icon-chevron-left\"></use>\n        </svg>`,\n    `<svg class=\"lightbox-button-icon-next\" width=\"24\" height=\"24\" aria-label=\"icon arrow right\">\n          <use href=\"${iconsUrl}#icon-chevron-right\"></use>\n        </svg>`,\n  ],\n  close: true,\n  closeText: `\n        <svg class=\"lightbox-close-icon\" width=\"16\" height=\"16\">\n          <use href=\"${iconsUrl}#close-form\"></use>\n        </svg>`,\n  enableKeyboard: true,\n  showCounter: true,\n  animationSlide: true,\n  loop: true,\n});\n\nconst galleryPagination = new GalleryPagination({\n  data: [],\n  fnCreateMarkup: createCardsGallery,\n  fnGetImages: getImages,\n  contentRef: galleryRef,\n  elementsPerPage: DEF_ELEMENT_PERPAGE,\n  searchStr: searchString,\n  boxRef: slBox,\n});\n\nfunction onSearchFormSubmit(event) {\n  event.preventDefault();\n\n  loaderRef.style.display = 'block';\n  searchString = event.currentTarget.search.value.trim();\n  getImages(searchString, 1)\n    .then(data => refreshOnSuccess(data))\n    .catch(msg => refreshOnError(msg))\n    .finally(() => {\n      searchForm.search.value = '';\n      loaderRef.style.display = 'none';\n    });\n}\n\nfunction refreshOnError(msg) {\n  galleryRef.style.backgroundColor = BGR_BODY;\n  createErrMsg(msg);\n  galleryRef.innerHTML = '';\n  galleryPagination && galleryPagination.refresh();\n  slBox && slBox.refresh();\n}\n\nfunction refreshOnSuccess(data) {\n  galleryRef.style.backgroundColor = BGR_GALLERY;\n  galleryPagination && galleryPagination.refresh();\n  const maxPages = Math.ceil(data.totalHits / DEF_ELEMENT_PERPAGE);\n  galleryPagination.addData(data.hits, maxPages, searchString);\n  slBox && slBox.refresh();\n}\n"],"names":["iconsUrl","galleryRef","loaderRef","searchForm","onSearchFormSubmit","searchString","slBox","SimpleLightbox","galleryPagination","GalleryPagination","createCardsGallery","getImages","DEF_ELEMENT_PERPAGE","event","data","refreshOnSuccess","msg","refreshOnError","BGR_BODY","createErrMsg","BGR_GALLERY","maxPages"],"mappings":"qLAAA,MAAeA,EAAA,iDCkBTC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAa,SAAS,cAAc,cAAc,EAExDA,EAAW,iBAAiB,SAAUC,CAAkB,EAExD,IAAIC,EAAe,GAEfC,EAAQ,IAAIC,EAAe,aAAc,CAC3C,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,IAAK,GACL,QAAS,CACP;AAAA,uBACmBP;AAAA,gBAEnB;AAAA,uBACmBA;AAAA,eAEpB,EACD,MAAO,GACP,UAAW;AAAA;AAAA,uBAEUA;AAAA,gBAErB,eAAgB,GAChB,YAAa,GACb,eAAgB,GAChB,KAAM,EACR,CAAC,EAED,MAAMQ,EAAoB,IAAIC,EAAkB,CAC9C,KAAM,CAAE,EACR,eAAgBC,EAChB,YAAaC,EACb,WAAYV,EACZ,gBAAiBW,EACjB,UAAWP,EACX,OAAQC,CACV,CAAC,EAED,SAASF,EAAmBS,EAAO,CACjCA,EAAM,eAAc,EAEpBX,EAAU,MAAM,QAAU,QAC1BG,EAAeQ,EAAM,cAAc,OAAO,MAAM,KAAI,EACpDF,EAAUN,EAAc,CAAC,EACtB,KAAKS,GAAQC,EAAiBD,CAAI,CAAC,EACnC,MAAME,GAAOC,EAAeD,CAAG,CAAC,EAChC,QAAQ,IAAM,CACbb,EAAW,OAAO,MAAQ,GAC1BD,EAAU,MAAM,QAAU,MAChC,CAAK,CACL,CAEA,SAASe,EAAeD,EAAK,CAC3Bf,EAAW,MAAM,gBAAkBiB,EACnCC,EAAaH,CAAG,EAChBf,EAAW,UAAY,GACvBO,GAAqBA,EAAkB,UACvCF,GAASA,EAAM,SACjB,CAEA,SAASS,EAAiBD,EAAM,CAC9Bb,EAAW,MAAM,gBAAkBmB,EACnCZ,GAAqBA,EAAkB,UACvC,MAAMa,EAAW,KAAK,KAAKP,EAAK,UAAYF,CAAmB,EAC/DJ,EAAkB,QAAQM,EAAK,KAAMO,EAAUhB,CAAY,EAC3DC,GAASA,EAAM,SACjB"}