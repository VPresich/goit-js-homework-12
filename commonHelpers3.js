var V=Object.defineProperty;var Z=(i,e,s)=>e in i?V(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var $=(i,e,s)=>(Z(i,typeof e!="symbol"?e+"":e,s),s),K=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)};var t=(i,e,s)=>(K(i,e,"read from private field"),s?s.call(i):e.get(i)),r=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},n=(i,e,s,o)=>(K(i,e,"write to private field"),o?o.call(i,s):e.set(i,s),s),Y=(i,e,s,o)=>({set _(d){n(i,e,d,s)},get _(){return t(i,e,o)}});import{c as tt,g as _,K as et,B as st,a as it}from"./assets/get-images-18c7ea61.js";/* empty css                      */import"./assets/vendor-9310f15c.js";var a,u,m,f;class nt{constructor(e,s,o){r(this,a,void 0);r(this,u,void 0);r(this,m,void 0);r(this,f,void 0);n(this,a,e),n(this,u,s),n(this,m,o),n(this,f,Array.from({length:o},()=>({display:!1,offset:0}))),this.setSlidesProperty()}set slidesPerPage(e){n(this,u,e)}get slidesPerPage(){return t(this,u)}get currentSlide(){return t(this,a)}set currentSlide(e){return n(this,a,e)}get slidesNumber(){return t(this,m)}set slidesNumber(e){return n(this,m,e)}refresh(){n(this,a,0),n(this,m,0),n(this,f,[])}setSlidesProperty(){t(this,f).forEach((e,s)=>{s>=t(this,a)&&s<t(this,a)+t(this,u)?e.display=!0:e.display=!1})}onPrevSlide(){t(this,a)>0&&(Y(this,a)._--,t(this,f).forEach((e,s)=>{e.offset+=1})),this.setSlidesProperty()}onNextSlide(){t(this,a)<t(this,m)-t(this,u)&&(n(this,a,t(this,a)+1),t(this,f).forEach((e,s)=>{e.offset-=1})),this.setSlidesProperty()}goToSlide(e){const s=e-t(this,a);e<=t(this,m)-t(this,u)&&(n(this,a,t(this,a)+s),t(this,f).forEach(o=>{o.offset-=s})),this.setSlidesProperty()}isExistNext(){return t(this,a)>=t(this,m)-t(this,u)||t(this,m)<=t(this,u)}isExistPrev(){return t(this,a)===0||t(this,m)<=t(this,u)}isDisplaySlide(e){return t(this,f)[e].display}getOffsetSlide(e){return t(this,f)[e].offset}}a=new WeakMap,u=new WeakMap,m=new WeakMap,f=new WeakMap;var C,l,g,p,h,v,y,P,x,D;const U=class{constructor({currentSlide:e,slidesPerPage:s,prevBtnId:o,nextBtnId:d,dotsContainerId:k="",sliderContainerId:G="",slidesCounterId:O="",dotDefaultClass:H="slider-dot",dotActiveClass:X="active-dot",isDotContainText:J=!1,elementsListLength:Q}){r(this,C,0);r(this,l,void 0);r(this,g,void 0);r(this,p,void 0);r(this,h,void 0);r(this,v,void 0);r(this,y,void 0);r(this,P,void 0);r(this,x,void 0);r(this,D,void 0);n(this,l,new nt(e,s,Q)),o&&n(this,g,document.getElementById(o)),d&&n(this,p,document.getElementById(d)),k&&(n(this,h,document.getElementById(k)),n(this,P,H),n(this,x,X),n(this,D,J)),G&&n(this,y,document.getElementById(G)),O&&n(this,v,document.getElementById(O)),this.init()}init(){this.initBtnsFunction(),t(this,y)&&this.initTouchFunction(),t(this,h)&&this.createDots()}update(){this.updateContent(),this.updateButtons(),t(this,h)&&this.updateDisplayDots(),t(this,v)&&this.updateCounter()}refresh(){t(this,l).refresh(),t(this,v)&&(t(this,v).textContent=""),t(this,h)&&(t(this,h).innerHTML="")}destroy(){this.removeBtnsFunction(),t(this,h)&&this.removeDots(),t(this,y)&&this.removeTouchFunction()}getCurrentSlide(){return t(this,l).currentSlide}getSlidesNumber(){return t(this,l).slidesNumber}initBtnsFunction(){t(this,g)&&t(this,g).addEventListener("click",this.onPrevBtnClick.bind(this)),t(this,p)&&t(this,p).addEventListener("click",this.onNextBtnClick.bind(this))}initTouchFunction(){n(this,C,0),t(this,y).addEventListener("touchstart",this.onSliderTouchStart.bind(this)),t(this,y).addEventListener("touchmove",this.onSliderTouchMove.bind(this))}createDots(){t(this,h).innerHTML="";for(let e=0;e<t(this,l).slidesNumber;e+=1){const s=document.createElement("li");s.className=t(this,P),s.dataset.index=e,t(this,D)&&(s.textContent=`${e+1}`),t(this,h).appendChild(s)}t(this,h).addEventListener("click",this.onSliderDotsClick.bind(this))}updateContent(){console.log(TODO in children)}updateButtons(){t(this,g).disabled=t(this,l).isExistPrev(),t(this,p).disabled=t(this,l).isExistNext(),t(this,g).style.display=t(this,l).slidesNumber>0?"flex":"none",t(this,p).style.display=t(this,l).slidesNumber>0?"flex":"none"}updateDisplayDots(){const e=t(this,h).children;for(let s=0;s<e.length;s+=1)s===t(this,l).currentSlide?(e[s].classList.add(t(this,x)),e[s].style.display="flex",console.log("qqq")):(e[s].classList.remove(t(this,x)),console.log("qqq1"),e[s].style.display=window.innerWidth<=375?"none":"")}updateCounter(){t(this,v).textContent=`${t(this,l).currentSlide+1+"/"+t(this,l).slidesNumber}`}removeBtnsFunction(){t(this,g)&&t(this,g).removeEventListener("click",this.onPrevBtnClick.bind(this)),t(this,p)&&t(this,p).removeEventListener("click",this.onNextBtnClick.bind(this))}removeDots(){t(this,h).innerHTML="",t(this,h).removeEventListener("click",this.onSliderDotsClick.bind(this))}removeTouchFunction(){t(this,y).removeEventListener("touchstart",this.onSliderTouchStart.bind(this)),t(this,y).removeEventListener("touchmove",this.onSliderTouchMove.bind(this))}onPrevBtnClick(){t(this,l).onPrevSlide(),this.update()}onNextBtnClick(){t(this,l).onNextSlide(),this.update()}onSliderDotsClick(e){const s=e.target;if(s.classList.contains(t(this,P))){const o=parseInt(s.dataset.index,10);t(this,l).goToSlide(o),this.update()}}onSliderTouchStart(e){n(this,C,e.touches[0].clientX)}onSliderTouchMove(e){const s=e.touches[0].clientX,o=t(this,C)-s;o>U.touchThreshold?(t(this,l).onNextSlide(),n(this,C,s),this.update()):o<-U.touchThreshold&&(t(this,l).onPrevSlide(),n(this,C,s),this.update())}addDot(){const e=document.createElement("li");e.className=t(this,P);const s=this.getSlidesNumber();e.dataset.index=s,t(this,D)&&(e.textContent=`${s+1}`),t(this,h).appendChild(e)}addNewPage(){this.addDot();const e=t(this,l).slidesNumber+1;t(this,l).slidesNumber=e,t(this,l).goToSlide(e-1),this.update()}};let q=U;C=new WeakMap,l=new WeakMap,g=new WeakMap,p=new WeakMap,h=new WeakMap,v=new WeakMap,y=new WeakMap,P=new WeakMap,x=new WeakMap,D=new WeakMap,$(q,"touchThreshold",75);var b,N;class ot extends q{constructor(s){const{elementsList:o,sliderContent:d}=s;super(s);r(this,b,void 0);r(this,N,void 0);n(this,N,o),n(this,b,d),super.update()}destroy(){super.destroy()}updateContent(){const s=super.getCurrentSlide(),o=t(this,N)[s].querySelector("img"),d=t(this,N)[s].querySelector("a");o.dataset.source?t(this,b).src=o.dataset.source:d.href?t(this,b).src=d.href:t(this,b).src=o.src,t(this,b).alt=o.alt}}b=new WeakMap,N=new WeakMap;var T,B,M,w,R,E,S,L,I;class rt extends q{constructor({data:s,isLastPage:o,elementsPerPage:d,contentRef:k,fnCreateMarkup:G,fnGetImages:O,searchStr:H}){super({currentSlide:0,slidesPerPage:1,elementsListLength:0,prevBtnId:"prevPageBtn",nextBtnId:"nextPageBtn",dotsContainerId:"paginationDots",dotDefaultClass:"pagination-dot",dotActiveClass:"active-pagination-dot",isDotContainText:!0,sliderContainerId:""});r(this,T,20);r(this,B,void 0);r(this,M,void 0);r(this,w,void 0);r(this,R,void 0);r(this,E,void 0);r(this,S,1);r(this,L,"");r(this,I,void 0);n(this,B,s),n(this,M,G),n(this,R,O),n(this,w,k),n(this,T,d),n(this,S,1),n(this,E,document.getElementById("morePageBtn")),t(this,E).addEventListener("click",this.onMoreBtnClick.bind(this)),n(this,I,document.querySelector(".border-loader-pagination")),n(this,L,H),this.update()}moreBtnUpdate(){t(this,E).style.display=t(this,B).length>0?"block":"none",console.log("moreBtnUpdate"),console.log(this.getSlidesNumber()),console.log(t(this,S)),t(this,E).disabled=this.getSlidesNumber()===t(this,S)}refresh(){super.refresh(),n(this,L,""),n(this,B,[]),this.update(),t(this,w).innerHTML="",this.moreBtnUpdate()}updateContent(){const o=super.getCurrentSlide()*t(this,T),d=t(this,B).slice(o,o+t(this,T));t(this,M).call(this,d,t(this,w))}addData(s,o,d){t(this,B).push(...s),n(this,L,d),n(this,S,o),super.addNewPage(),this.moreBtnUpdate(),console.log("this.#maxPages",t(this,S))}onMoreBtnClick(){const s=this.getSlidesNumber()+1;t(this,I).style.display="block",t(this,R).call(this,t(this,L),s).then(o=>{this.addData(o.hits,t(this,S),t(this,L)),refs.loader.style.display="none"}).catch(o=>{console.log(o),t(this,I).style.display="none"})}}T=new WeakMap,B=new WeakMap,M=new WeakMap,w=new WeakMap,R=new WeakMap,E=new WeakMap,S=new WeakMap,L=new WeakMap,I=new WeakMap;let A="";const lt=20,c={gallery:document.querySelector(".gallery"),modalBackdrop:document.querySelector(".modal-backdrop"),buttonClose:document.querySelector(".close-button"),modalContent:document.querySelector(".modal-content"),modalClose:document.querySelector("#closeBtn"),loader:document.querySelector(".border-loader"),searchForm:document.querySelector(".search-form")};c.gallery.addEventListener("click",at);c.buttonClose.addEventListener("click",W);c.modalBackdrop.addEventListener("click",ut);c.modalClose.addEventListener("click",W);c.searchForm.addEventListener("submit",ht);const F=new rt({data:[],fnCreateMarkup:tt,fnGetImages:_,isLastPage:!1,contentRef:c.gallery,elementsPerPage:20,searchStr:A});let j;const dt={slidesPerPage:1,prevBtnId:"prevBtn",nextBtnId:"nextBtn",dotsContainerId:"sliderDots",sliderContainerId:"modalContent",slidesCounterId:"slidesCounter",dotDefaultClass:"slider-dot",dotActiveClass:"active-dot",isDotContainText:!1,sliderContent:c.modalContent};function at(i){i.preventDefault();const e=i.target;if(!(e.classList.contains("card-cover")||e.classList.contains("card-cover-darkened")))return;const o=e.closest("li"),d=i.currentTarget.children,k=Array.from(d).indexOf(o);j=new ot({...dt,currentSlide:k,elementsList:d,elementsListLength:d.length}),ct()}function ht(i){i.preventDefault(),A=i.currentTarget.search.value.trim(),c.loader.style.display="block",_(A,1).then(e=>{ft(e)}).catch(e=>{mt(e)})}function ct(){c.modalBackdrop.classList.add("is-open"),window.addEventListener("keydown",z)}function W(i){window.removeEventListener("keydown",z),c.modalBackdrop.classList.remove("is-open"),j.destroy()}function z(i){i.code===et&&W()}function ut(i){i.currentTarget===i.target&&W()}function mt(i){c.searchForm.search.value="",c.loader.style.display="none",console.log(i),c.gallery.style.backgroundColor=st,F&&F.refresh()}function ft(i){c.searchForm.search.value="",c.loader.style.display="none",c.gallery.style.backgroundColor=it,F&&F.refresh();const e=Math.ceil(i.totalHits/lt);console.log(e),F.addData(i.hits,e,A)}
//# sourceMappingURL=commonHelpers3.js.map
